                        ┌──────────────┐
                        │ User Input   │
                        │ (Rock/Paper/ │
                        │  Scissors)   │
                        └──────┬───────┘
                               │
                        ┌──────▼───────┐
                        │ FastAPI      │
                        │ Game Router  │
                        └──────┬───────┘
                               │
                        ┌──────▼───────┐
                        │ Game Service │
                        └──────┬───────┘
                               │
                  ┌────────────▼────────────┐
                  │ Game Cache              │◄────────────┐
                  │ (GameSessionCache)      │             │
                  └────────────┬────────────┘             │
                               │                          │
                  ┌────────────▼────────────┐             │
                  │ AI Model                │             │
                  │ (Markov / Pattern)      │             │
                  └────────────┬────────────┘             │
                               │                          │
                        ┌──────▼───────┐                  │
                        │ Game Result  │                  │
                        │ Evaluation   │                  │
                        └──────┬───────┘                  │
                               │                          │
                 ┌────────────▼────────────┐              │
                 │ Update Cache            │              │
                 │ (Game Data)             │              │
                 └────────────┬────────────┘              │
                              │                           │
      ┌───────────────────────▼────────────────────┐      │
      │  IF cache length >= N OR timeout triggered │      │
      │    └─> Flush to SQLite Storage            │◄──────┘
      └────────────────────────────────────────────┘

                        ┌─────────────┐
                        │ LLM Service │
                        │ (Optional)  │
                        └──────┬──────┘
                               │
                        ┌──────▼───────┐
                        │ LLM Cache    │
                        │ (LLMCache)   │
                        └──────┬───────┘
                               │
                        ┌──────▼───────┐
                        │ Flush to     │
                        │ SQLite       │
                        └──────────────┘
